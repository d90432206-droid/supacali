# 📦 Supabase 資料匯入指南

## 📁 範本檔案說明

本資料夾包含以下 CSV 範本檔案：

### 1️⃣ `cali_products_template.csv` - 校正服務項目
**欄位說明：**
- `name`: 產品/服務名稱（必填）
- `specification`: 規格（例：0-150mm）
- `category`: 類別（例：長度、壓力、電量）
- `standard_price`: 標準價格（數字，不要有千分位符號）

**範例：**
```
數位卡尺,0-150mm,長度,500
壓力錶,0-10kg/cm2,壓力,1200
```

---

### 2️⃣ `cali_customers_template.csv` - 客戶資料
**欄位說明：**
- `name`: 客戶名稱（必填）
- `contact_person`: 聯絡人
- `phone`: 電話

**範例：**
```
台積電,張經理,0912-345-678
聯發科,王工程師,0987-654-321
```

---

### 3️⃣ `cali_technicians_template.csv` - 技術人員
**欄位說明：**
- `name`: 技術人員姓名（必填）

**範例：**
```
陳小明
林大華
```

---

## 🚀 匯入步驟

### 方法 A：使用範本直接編輯（推薦）

#### 步驟 1：編輯範本檔案
1. 用 **Excel** 開啟範本檔案（例：`cali_products_template.csv`）
2. **保留第一行標題**（欄位名稱）
3. 刪除範例資料，輸入您的實際資料
4. 另存新檔為 **CSV UTF-8 (逗號分隔)** 格式

#### 步驟 2：匯入到 Supabase
1. 登入 Supabase Dashboard
2. 進入「Table Editor」
3. 選擇對應的表格（例：`cali_products`）
4. 點擊右上角的「**Insert**」→「**Import data from CSV**」
5. 上傳您剛才編輯好的 CSV 檔案
6. 確認欄位對應正確
7. 點擊「**Import**」

---

### 方法 B：從舊檔案轉換

如果您已經有 Excel 或 CSV 舊檔案：

#### 步驟 1：調整欄位名稱
1. 開啟您的舊檔案
2. **第一行必須是欄位名稱**，對照範本檔案調整：
   - 產品名稱 → `name`
   - 規格 → `specification`
   - 類別 → `category`
   - 價格 → `standard_price`

#### 步驟 2：轉換編碼（解決亂碼）
使用專案內的轉換工具：
```powershell
python convert_csv_encoding.py "您的檔案路徑.csv"
```

#### 步驟 3：另存為 UTF-8 格式
- 檔案 → 另存新檔
- 格式選擇：**CSV UTF-8 (逗號分隔)**

#### 步驟 4：匯入到 Supabase
（同方法 A 的步驟 2）

---

## ⚠️ 常見問題

### ❌ 問題 1：出現亂碼
**原因**：編碼不是 UTF-8  
**解決**：使用 `convert_csv_encoding.py` 轉換

### ❌ 問題 2：欄位對應錯誤
**原因**：CSV 第一行欄位名稱不符  
**解決**：確保第一行完全符合範本的欄位名稱（區分大小寫）

### ❌ 問題 3：數字格式錯誤
**原因**：價格欄位有千分位符號（例：1,200）  
**解決**：移除逗號，改為 1200

### ❌ 問題 4：日期格式錯誤
**原因**：日期格式不符  
**解決**：使用 ISO 格式：`2024-01-12` 或 `2024-01-12 08:00:00`

---

## 📋 欄位不需要填的項目

以下欄位會**自動生成**，不需要在 CSV 中填寫：
- `id` - UUID 主鍵（自動生成）
- `created_at` - 建立時間（自動填入當前時間）
- `last_updated` - 最後更新時間（自動填入當前時間）

---

## 🎯 快速檢查清單

匯入前請確認：
- ✅ 第一行是欄位名稱
- ✅ 欄位名稱完全符合範本
- ✅ 編碼是 UTF-8
- ✅ 數字沒有千分位符號
- ✅ 沒有多餘的空白列或欄位

---

## 💡 進階技巧

### 批次處理多個檔案
如果有多個 CSV 需要轉換編碼：
```powershell
python convert_csv_encoding.py "資料夾路徑"
```

### 檢查 CSV 內容
在 PowerShell 中快速預覽：
```powershell
Get-Content "檔案.csv" -Head 5 -Encoding UTF8
```

---

## 📞 需要協助？

如果遇到問題：
1. 檢查 CSV 檔案的編碼是否為 UTF-8
2. 確認第一行欄位名稱是否正確
3. 使用範本檔案重新整理資料

**祝您匯入順利！** 🎉
